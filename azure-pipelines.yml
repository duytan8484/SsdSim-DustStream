jobs:
- job: BUILD_SSDSIM
  condition: eq(variables['JobName'], 'BUILD_SSDSIM')
  steps:
  - script: 'npm install'
  - script: 'node updateBeginJob.js'
  - script: git clone https://github.com/DustParticle/SsdSim.git
  - task: NuGetCommand@2
    inputs:
      command: 'restore'
  - task: VSBuild@1
    displayName: 'Build solution **/*.sln'
    inputs:
      configuration: release
      platform: x64
  - task: PublishBuildArtifacts@1
    inputs:
      PathtoPublish: ./SsdSim/x64/Release/
      ArtifactName: ssdsimpackage
      publishLocation: FilePath
      TargetPath: '\\my\share\artifacts'
  - script: 'node updateEndJob.js'


- job: UNIT_TEST
  condition: eq(variables['JobName'], 'UNIT_TEST')
  steps:
  - script: 'npm install'
  - script: 'node updateBeginJob.js'
  - task: DownloadFileshareArtifacts@1
    inputs:
      filesharePath: '\\my\share\artifacts'
      artifactName: ssdsimpackage
  - powershell: ls $(System.ArtifactsDirectory)
  - powershell: $(System.ArtifactsDirectory)'/Test.exe'
  - script: 'node updateEndJob.js'


